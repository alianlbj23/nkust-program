{% extends "base.html" %}


{% block title %}遊戲介紹{% endblock %}

{% block css %}
<style>
    .choice{
        font-size: 120%;
        width: 60%;
        height: 50px;
        display: block;
        text-align: center;
        cursor: pointer;
        line-height: 40px;
        color: #fff;
        background-color: #000;
        transition: all .3s linear;
        margin:auto;
        margin-bottom:20px;
    }
    .choice:hover{
        background-color: #666;
    }

    .disabled {
        pointer-events: none;
        font-size: 120%;
        width: 60%;
        height: 50px;
        display: block;
        text-align: center;
        cursor: pointer;
        line-height: 40px;
        color: #fff;
        background-color: #000;
        transition: all .3s linear;
        margin:auto;
        margin-bottom:20px;
        opacity: 0.6;
        cursor: default;
    }
    
</style>
{% load static %}
{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static 'ready.css' %}">
<nav class="navbar navbar-expand-md" style="border-bottom:solid 20px;border-color:#00BB00;margin-top:20px;margin-bottom:20px;">
    <div class="navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <span class="v13_58" ><img src="/media/image/presentation.png" width="60" height="60">猜歌囉</span>
            </li>
        </ul>
    </div>

    <div class="navbar-collapse collapse w-100 order-3 dual-collapse2">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                
            </li>
        </ul>
  </div>
</nav>
<div class="container">
    <div class="row" id="topic">
        {% comment %} <div class="col-xs-12 col-sm-6 col-md-12" id="choice"></div>
        <div class="col-xs-12 col-sm-6 col-md-12" id="choice"></div>
        <div class="col-xs-12 col-sm-6 col-md-12" id="choice"></div>
        <div class="col-xs-12 col-sm-6 col-md-12" id="choice"></div> {% endcomment %}
    </div>
</div>
<div id="messages"></div>
<script type="text/javascript">
    var goBack = 0
    var pic_choice = []
    var ans
    var url = `ws://${window.location.host}/ws/game/`
    var chatSocket = new WebSocket(url)
    chatSocket.onopen  = function(e){
        chatSocket.send(JSON.stringify({
            "goBack":goBack,
        }))
    }
    chatSocket.onmessage = function(e){
        let data = JSON.parse(e.data)
        if(data.type === 'chat'){
            if(goBack==0){
                goBack = 1;
                ans = data.ans_number
                console.log("ans", ans)
                $("#topic").html(`
                <div class="col-xs-12 col-sm-6 col-md-12"><button class="choice"  onclick="test1(0)">${data.choice0}</button></div>
                <div class="col-xs-12 col-sm-6 col-md-12"><button class="choice" onclick="test1(1)">${data.choice1}</button></div>
                <div class="col-xs-12 col-sm-6 col-md-12"><button class="choice" onclick="test1(2)">${data.choice2}</button></div>
                <div class="col-xs-12 col-sm-6 col-md-12"><button class="choice" onclick="test1(3)">${data.choice3}</button></div>
                `)
            }
            
        }
    }


    function test1(e){
        $("button").removeClass("choice").addClass("disabled")
        if(e==ans){
            
        }
    }

    function timeout(){
        window.setTimeout(function() {
            chatSocket.send(JSON.stringify({
                'goBack':goBack,
            }))
        },1000);
        setTimeout("timeout()", 1000);
    }
    timeout();
</script>
{% endblock %}